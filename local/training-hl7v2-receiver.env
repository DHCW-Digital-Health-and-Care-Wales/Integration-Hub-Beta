# Training HL7 Server Configuration
# ==================================
# Environment variables for the training server
# These values can be changed without modifying code

# Server binding
# --------------
# HOST: Network interface to bind to
#   0.0.0.0 = Accept connections from any network interface
#   localhost = Only accept local connections
HOST=0.0.0.0

# PORT: TCP port number to listen on
#   Must be unique for each service
#   2590 is chosen to avoid conflicts with other HL7 servers in this project
PORT=2591

# HL7 Validation
# --------------
# HL7_VERSION: Expected HL7 version in MSH-12 field
#   Messages with a different version will be rejected with an AE (Application Error) ACK
#   Comment out or remove this line to accept any HL7 version
#HL7_VERSION=2.5,2.5.1

# =====================================================================
# EXERCISE 4 SOLUTION: Allowed Sending Applications
# =====================================================================
# ALLOWED_SENDERS: Comma-separated list of allowed sending application codes
#   Only messages from these applications (MSH-3 field) will be accepted.
#   Messages from other applications will receive an AE (Application Error) ACK.
#
#   This mirrors the production SENDING_APP configuration in hl7_server.
#   See: hl7_server/hl7_server/hl7_validator.py _validate_sending_app()
#
# Why validate sending applications?
#   1. SECURITY: Only accept messages from known, authorized systems
#   2. DATA INTEGRITY: Ensure data comes from expected sources
#   3. DEBUGGING: Quickly identify misconfigured or rogue systems
#   4. COMPLIANCE: Healthcare regulations require message source tracing
#
# Configuration options:
#   ALLOWED_SENDERS=169,245     -> Accept only apps 169 and 245
#   ALLOWED_SENDERS=169         -> Accept only app 169
#   # ALLOWED_SENDERS=...       -> Comment out to accept ALL senders
#
# Allow apps 169 and 245 to demonstrate the feature:
# ALLOWED_SENDERS=169,245

# =====================================================================
# WEEK 2: Service Bus Configuration
# =====================================================================
# These settings enable the server to publish validated HL7 messages
# to Azure Service Bus for the transformer component to process.
#
# Connection string for Azure Service Bus
#   - For local development: Uses the Service Bus Emulator connection string
#   - For Azure: Use the connection string from Azure Portal
#
# The Service Bus Emulator runs as a Docker container (see docker-compose.yml)
# and provides a local testing environment without needing an Azure subscription.
#
# Connection String Format:
#   Endpoint=sb://<namespace>.servicebus.windows.net/;SharedAccessKeyName=...
#   For emulator: Endpoint=sb://sb-emulator;SharedAccessKeyName=...;UseDevelopmentEmulator=true
# Note: Use 'sb-emulator' hostname for Docker, 'localhost' for local development
SERVICE_BUS_CONNECTION_STRING=Endpoint=sb://sb-emulator;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=SAS_KEY_VALUE;UseDevelopmentEmulator=true

# EGRESS_QUEUE_NAME: The queue where validated messages are published
#   This must match a queue defined in ServiceBusEmulatorConfig.json
#   The transformer component reads from this queue
EGRESS_QUEUE_NAME=local-inthub-training-hl7v2-xform-ingress

# EGRESS_SESSION_ID: Session ID for ordered message processing
#   Session-enabled queues ensure messages are processed in order
#   This should match the SESSION_ID expected by the transformer
EGRESS_SESSION_ID=training-hl7v2-session
